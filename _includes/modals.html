<!-- Portfolio Modals -->
{% for post in site.posts %}
<div class="portfolio-modal modal fade" id="portfolioModal-{{ post.modal-id }}" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-content">
    <div class="close-modal" data-dismiss="modal">
      <div class="lr">
        <div class="rl"></div>
      </div>
    </div>
    <div class="container-fluid">
      <div class="row">
        <div class="col-lg-12 green-background">
          <div class="container">
            <div class="row">
              <div class="col-lg-8 col-lg-offset-2">
                <div class="modal-header-custom">
                  <img src="{{ site.baseurl }}{{ post.img }}" class="img-responsive img-centered" alt="{{ post.alt }}">
                  <h3>{{ post.title }}</h3>
                  <hr class="dark-green-line">
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-lg-8 col-lg-offset-2">
          <div class="modal-body">
            {% if post.description %}
            <p class="modal-description">{{ post.description }}</p>
            {% endif %}
            {% if post.img1 %}
            <div class="modal-header-custom img1-container">
              <img src="{{ site.baseurl }}{{ post.img1 }}" class="img-responsive img-centered custom-img1-size" alt="{{ post.alt }}">
            </div>
            {% endif %}                       
            {% if post.description1 %}
            <p class="modal-description">{{ post.description1 }}</p>
            {% endif %}
            <ul class="list-inline item-details">
              {% if post.client %}
              <li>Client:
                <strong>{{ post.client }}</strong>
              </li>
              {% endif %}
              {% if post.project-date %}
              <li>Date:
                <strong>{{ post.project-date }}</strong>
              </li>
              {% endif %}
              {% if post.category %}
              <li>Service:
                <strong>{{ post.category }}</strong>
              </li>
              {% endif %}
            </ul>
            <!-- MP4 Video Section -->
            {% if post.mp4-video %}
            <h3>{{ post.mp4-title }}</h3>
            <div class="video-container">
              <video controls>
                <source src="{{ site.baseurl }}/{{ post.mp4-video }}" type="video/mp4">
                Your browser does not support the video tag.
              </video>
            </div>
            {% endif %}
            <!-- YouTube Video Section -->
            {% if post.youtube-video-id %}
            <h3>{{ post.youtube-title }}</h3>
            <div class="video-container">
              <iframe src="https://www.youtube.com/embed/{{ post.youtube-video-id }}" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
            {% endif %}
            <!-- Gallery Section -->
            {% if post.gallery %}
            <div class="gallery-container">
              <h3 class="text-uppercase">Project Gallery</h3>
              <div class="row">
                {% for item in post.gallery %}
                <div class="col-md-4">
                  <img src="{{ site.baseurl }}/{{ item.image }}" class="img-fluid gallery-item" alt="{{ item.description }}" data-description="{{ item.description }}" onclick="expandImage(this)">
                </div>
                {% endfor %}
              </div>
            </div>
            {% endif %}
            <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endfor %}

<!-- Screenshot Modal Structure -->
<div id="screenshotModal" class="screenshot-modal">
    <span class="close-button">&times;</span>
    <img class="modal-content" id="expandedScreenshot">
    <div id="imageDescription"></div>
</div>

<style> 
/* Extend the green background */
.green-background {
  background-color: #{{site.color.primary}};
  padding: 20px 0; /* Optional: Add padding for better aesthetics */
}

/* Align the descriptive text to the left and make it wider */
.modal-description {
  text-align: left;
  width: 100%; /* You can adjust this value as needed */
  max-width: 800px; /* Set a max width for readability */
  margin: 0 auto; /* Center align the text block */
}


/* Ensure the modal content is not constrained by the bootstrap classes */
.modal-content {
  max-width: 100%;
}

.modal-body img {
  display: block;
  margin: 0 auto;
}

/* Override Bootstrap container width to make it full width */
.container-fluid {
  padding-left: 0;
  padding-right: 0;
}

/* Add this rule at the end */
.modal-header-custom img {
    border-radius: 40px; /* Adjust the value to your preference */
}

/* Custom styles for the horizontal line */
.dark-green-line {
  border: 0;
  height: 1px; /* Adjust height as needed */
  background-color: #{{site.color.secondary-dark}}; /* Dark green color */
  margin: 10px 0; /* Margin to give space around the line */
}

/* Custom styles for img1 */
.custom-img1-size {
  max-width: 50%; /* Adjust this value to your preference */
  width: auto;
  height: auto;
  margin: 0 auto; /* Center the image */
}

/* Add padding between the description and img1 */
.img1-container {
  padding-top: 20px; /* Adjust the value as needed for more or less space */
}

/* Modal Styles */
.modal {
    display: none; /* Hidden by default */
    position: fixed;
    z-index: 1000; /* Sit on top */
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0, 0, 0, 0.9); /* Black background with opacity */
    padding-top: 60px;
}

.modal-content {
    margin: auto;
    display: block;
    max-width: 80%;
    max-height: 80%;
    border-radius: 10px;
}

#imageDescription {
    text-align: center;
    color: #ccc;
    font-size: 16px;
    margin-top: 10px;
}

.close-button {
    position: absolute;
    top: 30px;
    right: 35px;
    color: #fff;
    font-size: 40px;
    font-weight: bold;
    transition: 0.3s;
    cursor: pointer;
}

.close-button:hover,
.close-button:focus {
    color: #bbb;
    text-decoration: none;
    cursor: pointer;
}

/* Screenshot grid image hover */
.screenshot-item img {
    cursor: pointer;
    transition: transform 0.2s ease;
}

.screenshot-item img:hover {
    transform: scale(1.05);
}

/* Portfolio Modal Styles */
.portfolio-modal {
    display: none; /* Hidden by default */
    position: fixed;
    z-index: 10001; /* Ensure it's above other elements but below the screenshot modal */
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: #{{site.color.primary}}; /* Opaque green background */
    padding-top: 60px;
}

.portfolio-modal-content {
    margin: auto;
    display: block;
    max-width: 80%;
    max-height: 80%;
    border-radius: 10px;
}

.portfolio-close-button {
    position: absolute;
    top: 30px;
    right: 35px;
    color: #fff;
    font-size: 40px;
    font-weight: bold;
    cursor: pointer;
}

/* Screenshot Modal Styles */
.screenshot-modal {
    display: none; /* Hidden by default */
    position: fixed;
    z-index: 10002; /* Ensure the modal is on top of everything */
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0, 0, 0, 0.9); /* Black background with opacity */
    padding-top: 60px;
}

.screenshot-modal-content {
    margin: auto;
    display: block;
    max-width: 80%;
    max-height: 80%;
    border-radius: 10px;
}

.screenshot-trigger {
    cursor: pointer;
    transition: transform 0.2s ease;
}

.screenshot-trigger:hover {
    transform: scale(1.05);
}

.close-button {
    position: absolute;
    top: 30px;
    right: 35px;
    color: #fff;
    font-size: 40px;
    font-weight: bold;
    cursor: pointer;
}

.close-button:hover,
.close-button:focus {
    color: #bbb;
    text-decoration: none;
    cursor: pointer;
}

/* Screenshot grid image hover */
.gallery-item {
    cursor: pointer;
    transition: transform 0.2s ease;
}

.gallery-item:hover {
    transform: scale(1.05);
}

</style>

<script>
function expandImage(img) {
    var modal = document.getElementById("screenshotModal");
    var modalImg = document.getElementById("expandedScreenshot");
    var captionText = document.getElementById("imageDescription");
    modal.style.display = "block";
    modalImg.src = img.src;
    captionText.innerHTML = img.alt;

    var span = document.getElementsByClassName("close-button")[0];
    span.onclick = function () {
        modal.style.display = "none";
    };
}
</script>
